build:
  environment:
    php:
      version: 7.2
  nodes:
    analysis:
      project_setup:
        override:
          - true
      tests:
        override:
          - php-scrutinizer-run
          - command: "phpcs-run"
            use_website_config: true
    tests: true
    coverage:
      tests:
        override:
          - command: "./vendor/bin/phpunit -c phpunit.xml.dist --coverage-clove ./build/coverage/clover.xml"
            coverage:
              file: "./build/coverage/clover.xml"
              format: "clover"

filter:
  excluded_paths:
    - "tests/"
  dependency_paths:
    - "vendor/"

checks:
  php: true

coding_style:
  php: {}

imports:
  - php

tools:
  php_analyzer:
    config:
      loops_must_use_braces: true
  php_code_sniffer:
    config:
      standard: "PSR4"
  php_mess_detector:
    enabled: true
  php_cpd:
    enabled: true
  php_loc:
    enabled: true
    excluded_dirs:
      - "vendor"
  php_cs_fixer:
    enabled: true
    config:
      level: "all"
